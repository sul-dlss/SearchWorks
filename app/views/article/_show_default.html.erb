<% mini_map_sections = {} %>

<div class="article-record-metadata row">
  <div class="article-record-panels col-md-4">
    <%= render "article/record/metadata_panels", document: document -%>
  </div>
  <div class="article-record-sections record-sections col-md-8">
    <dl class="dl-horizontal dl-invert">
      <% blacklight_config.show.sections.each do |section_name, fields| -%>
        <% if (section = render('article/record/section_fields', document: document, fields: fields.keys)).present? -%>
          <% if section_name == 'Fulltext' -%>
            <div class="section-container-heading">
              <h2>Full Text</h2>
            </div>
            <div class='section-body'>
              <%= section -%>
            </div>
          <% else -%>
            <% if section_name == 'Summary' -%>
              <div class="section-container-heading">
                <h2>About this article</h2>
              </div>
              <div class='section'>
            <% else -%>
              <div class='section'>
                <div class='section-heading'>
                  <% mini_map_sections[section_name.downcase] = true %>
                  <h2 id="<%= section_name.downcase %>">
                    <%= section_name -%>
                  </h2>
                </div>
            <% end -%>
              <div class='section-body'>
                <%= section -%>
              </div>
            </div>
          <% end -%>
        <% end %>
      <% end -%>
    </dl>
  </div>
</div>

<%= render partial: 'shared/side_nav_minimap', locals: { has_data: mini_map_sections } %>
