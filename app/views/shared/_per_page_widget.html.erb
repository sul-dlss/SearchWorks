<% if show_sort_and_per_page? and !blacklight_config.per_page.blank? %>
  <span class="visually-hidden"><%= t('blacklight.search.per_page.title') %></span>
  <div id="per_page-dropdown" class="btn-group">
    <button type="button" class="btn btn-sm btn-outline-primary dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <%= t(:'blacklight.search.per_page.button_label_html', :count => sw_current_per_page(@response)).html_safe %>
    </button>
    <div class="dropdown-menu" role="menu">
      <%- sw_per_page_options_for_select.each do |(label, count)| %>
        <%= link_to url_for(search_state.params_for_search(per_page: count)), class: 'dropdown-item', 'aria-current': sw_current_per_page(@response) == count, role: 'menuitem', tabindex: '-1' do %>
          <% if sw_current_per_page(@response) == count %>
            <%= t 'blacklight.search.highlight.active_html' %>
          <% end %>
          <%= label %>
        <% end %>
      <%- end -%>
    </div>
  </div>
<% end %>
