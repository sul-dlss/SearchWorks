<% document ||= @document %>

<%= render partial: 'catalog/dates_from_solr', locals: {document: document} %>

<% title_translation = get_data_with_label_from_marc(document.to_marc, "Title Translation", '242') %>
<% unless title_translation.nil? %>
  <%= render_field_from_marc(title_translation) %>
<% end %>

<% collective_title = get_data_with_label_from_marc(document.to_marc, "Collective Title", '243') %>
<% unless collective_title.nil? %>
  <%= render_field_from_marc(collective_title) %>
<% end %>

<% title_variation = get_data_with_label_from_marc(document.to_marc, "Title Variation", '246') %>
<% unless title_variation.nil? %>
  <%= render_field_from_marc(title_variation, :delimiter => "<br/>") %>
<% end %>

<% former_title = get_data_with_label_from_marc(document.to_marc, "Former Title", '247') %>
<% unless former_title.nil? %>
  <%= render_field_from_marc(former_title) %>
<% end %>

<% musical_pres = get_data_with_label_from_marc(document.to_marc, "Musical Presentation", '254', {:sub_fields => ['a']}) %>
<% unless musical_pres.nil? %>
  <%= render_field_from_marc(musical_pres) %>
<% end %>

<% map_data = get_data_with_label_from_marc(document.to_marc, "Map Data", '255') %>
<% unless map_data.nil? %>
  <%= render_field_from_marc(map_data) %>
<% end %>

<% file_chars = get_data_with_label_from_marc(document.to_marc, "File Characteristics", '256', {:sub_fields => ['a']}) %>
<% unless file_chars.nil? %>
  <%= render_field_from_marc(file_chars) %>
<% end %>

<% frequency = get_data_with_label_from_marc(document.to_marc, "Frequency", '310') %>
<% unless frequency.nil? %>
  <%= render_field_from_marc(frequency) %>
<% end %>

<% former_frequency = get_data_with_label_from_marc(document.to_marc, "Former Publication Frequency", '321') %>
<% unless former_frequency.nil? %>
  <%= render_field_from_marc(former_frequency) %>
<% end %>

<% medium = get_data_with_label_from_marc(document.to_marc, "Medium", '340') %>
<% unless medium.nil? %>
  <%= render_field_from_marc(medium) %>
<% end %>

<% date_range = get_data_with_label_from_marc(document.to_marc, "Vol/date range", '362') %>
<% unless date_range.nil? %>
  <%= render_field_from_marc(date_range) %>
<% end %>

<% series_490 = get_data_with_label_from_marc(document.to_marc, 'Series', '490') %>
<% unless series_490.nil? %>
  <%= render_field_from_marc(series_490) %>
<% end %>

<% note_500 = get_data_with_label_from_marc(document.to_marc, "Note", '500') %>
<% unless note_500.nil? %>
  <%= render_field_from_marc(note_500) %>
<% end %>

<% with_note = get_data_with_label_from_marc(document.to_marc, "With", '501') %>
<% unless with_note.nil? %>
  <%= render_field_from_marc(with_note)  %>
<% end %>

<% note_502 = get_data_with_label_from_marc(document.to_marc, "Note", '502') %>
<% unless note_502.nil? %>
  <%= render_field_from_marc(note_502, {:delimiter => "<br/>"}) %>
<% end %>

<% access = get_data_with_label_from_marc(document.to_marc, "Access", '506') %>
<% unless access.nil? %>
  <%= render_field_from_marc(access) %>
<% end %>

<% scale = get_data_with_label_from_marc(document.to_marc, "Scale", '507') %>
<% unless scale.nil? %>
  <%= render_field_from_marc(scale) %>
<% end %>

<% prod_credits = get_data_with_label_from_marc(document.to_marc, "Production Credits", '508') %>
<% unless prod_credits.nil? %>
  <%= render_field_from_marc(prod_credits) %>
<% end %>

<% citation = get_data_with_label_from_marc(document.to_marc, "Citation", '510') %>
<% unless citation.nil? %>
  <%= render_field_from_marc(citation) %>
<% end %>

<% participant = get_data_with_label_from_marc(document.to_marc, "Participant", '511') %>
<% unless participant.nil? %>
  <%= render_field_from_marc(participant) %>
<% end %>

<% report = get_data_with_label_from_marc(document.to_marc, "Report", '513') %>
<% unless report.nil? %>
  <%= render_field_from_marc(report) %>
<% end %>

<% accuracy = get_data_with_label_from_marc(document.to_marc, "Accuracy", '514') %>
<% unless accuracy.nil? %>
  <%= render_field_from_marc(accuracy) %>
<% end %>

<% note_515 = get_data_with_label_from_marc(document.to_marc, "Note", '515') %>
<% unless note_515.nil? %>
  <%= render_field_from_marc(note_515) %>
<% end %>

<% file_data_type = get_data_with_label_from_marc(document.to_marc, "File/Data Type", '516') %>
<% unless file_data_type.nil? %>
  <%= render_field_from_marc(file_data_type) %>
<% end %>

<% event = get_data_with_label_from_marc(document.to_marc, "Event", '518') %>
<% unless event.nil? %>
  <%= render_field_from_marc(event) %>
<% end %>

<% audience = get_data_with_label_from_marc(document.to_marc, "Audience", '521') %>
<% unless audience.nil? %>
  <%= render_field_from_marc(audience) %>
<% end %>

<% coverage = get_data_with_label_from_marc(document.to_marc, "Coverage", '522') %>
<% unless coverage.nil? %>
  <%= render_field_from_marc(coverage) %>
<% end %>

<% cite_as = get_data_with_label_from_marc(document.to_marc, "Cite as", '524') %>
<% unless cite_as.nil? %>
  <%= render_field_from_marc(cite_as) %>
<% end %>

<% supplement = get_data_with_label_from_marc(document.to_marc, "Supplement", '525') %>
<% unless supplement.nil? %>
  <%= render_field_from_marc(supplement) %>
<% end %>

<% note_526 = get_data_with_label_from_marc(document.to_marc, "Note", '526') %>
<% unless note_526.nil? %>
  <%= render_field_from_marc(note_526) %>
<% end %>

<% note_530 = get_data_with_label_from_marc(document.to_marc, "Note", '530') %>
<% unless note_530.nil? %>
  <%= render_field_from_marc(note_530) %>
<% end %>

<% reproduction = get_data_with_label_from_marc(document.to_marc, "Reproduction", '533') %>
<% unless reproduction.nil? %>
  <%= render_field_from_marc(reproduction) %>
<% end %>

<% original_version = get_data_with_label_from_marc(document.to_marc, "Original Version", '534') %>
<% unless original_version.nil? %>
  <%= render_field_from_marc(original_version) %>
<% end %>

<% loc_of_originals = get_data_with_label_from_marc(document.to_marc, "Location of Originals", '535') %>
<% unless loc_of_originals.nil? %>
  <%= render_field_from_marc(loc_of_originals) %>
<% end %>

<% funding_info = get_data_with_label_from_marc(document.to_marc, "Funding Information", '536') %>
<% unless funding_info.nil? %>
  <%= render_field_from_marc(funding_info) %>
<% end %>

<% format_note = get_data_with_label_from_marc(document.to_marc, "Format", '538') %>
<% unless format_note.nil? %>
  <%= render_field_from_marc(format_note) %>
<% end %>

<% terms = get_data_with_label_from_marc(document.to_marc, "Terms", '540') %>
<% unless terms.nil? %>
  <%= render_field_from_marc(terms) %>
<% end %>

<% source = get_data_with_label_from_marc(document.to_marc, "Source", '541') %>
<% unless source.nil? %>
  <%= render_field_from_marc(source) %>
<% end %>

<% copyright_status = get_data_with_label_from_marc(document.to_marc, "Copyright Status", '542') %>
<% unless copyright_status.nil? %>
  <%= render_field_from_marc(copyright_status) %>
<% end %>

<% note_544 = get_data_with_label_from_marc(document.to_marc, "Note", '544') %>
<% unless note_544.nil? %>
  <%= render_field_from_marc(note_544) %>
<% end %>

<% note_545 = get_data_with_label_from_marc(document.to_marc, "Note", '545') %>
<% unless note_545.nil? %>
  <%= render_field_from_marc(note_545) %>
<% end %>

<% note_547 = get_data_with_label_from_marc(document.to_marc, "Note", '547') %>
<% unless note_547.nil? %>
  <%= render_field_from_marc(note_547) %>
<% end %>

<% note_550 = get_data_with_label_from_marc(document.to_marc, "Note", '550') %>
<% unless note_550.nil? %>
  <%= render_field_from_marc(note_550) %>
<% end %>

<% note_552 = get_data_with_label_from_marc(document.to_marc, "Note", '552') %>
<% unless note_552.nil? %>
  <%= render_field_from_marc(note_552) %>
<% end %>

<% finding_aid = get_data_with_label_from_marc(document.to_marc, "Finding Aid", '555') %>
<% unless finding_aid.nil? %>
  <%= render_field_from_marc(finding_aid) %>
<% end %>

<% documentation = get_data_with_label_from_marc(document.to_marc, "Documentation", '556') %>
<% unless documentation.nil? %>
  <%= render_field_from_marc(documentation) %>
<% end %>

<% provenance = get_data_with_label_from_marc(document.to_marc, "Provenance", '561') %>
<% unless provenance.nil? %>
  <%= render_field_from_marc(provenance) %>
<% end %>

<% copy_version = get_data_with_label_from_marc(document.to_marc, "Copy/Version", '562') %>
<% unless copy_version.nil? %>
  <%= render_field_from_marc(copy_version) %>
<% end %>

<% binding_note = get_data_with_label_from_marc(document.to_marc, "Note", '563') %>
<% unless binding_note.nil? %>
  <%= render_field_from_marc(binding_note) %>
<% end %>

<% variables = get_data_with_label_from_marc(document.to_marc, "Variables", '565') %>
<% unless variables.nil? %>
  <%= render_field_from_marc(variables) %>
<% end %>

<% methodology = get_data_with_label_from_marc(document.to_marc, "Methodology", '567') %>
<% unless methodology.nil? %>
  <%= render_field_from_marc(methodology) %>
<% end %>

<% related_items = get_data_with_label_from_marc(document.to_marc, "Related Items", '580') %>
<% unless related_items.nil? %>
  <%= render_field_from_marc(related_items, {:delimiter => "<br/>"}) %>
<% end %>

<% citations = get_data_with_label_from_marc(document.to_marc, "Citations", '581') %>
<% unless citations.nil? %>
  <%= render_field_from_marc(citations) %>
<% end %>

<% action_note = get_data_with_label_from_marc(document.to_marc, "Action note", '583') %>
<% unless action_note.nil? %>
  <%= render_field_from_marc(action_note) %>
<% end %>

<% note_584 = get_data_with_label_from_marc(document.to_marc, "Note", '584') %>
<% unless note_584.nil? %>
  <%= render_field_from_marc(note_584) %>
<% end %>

<% exhibitions = get_data_with_label_from_marc(document.to_marc, "Exhibitions", '585') %>
<% unless exhibitions.nil? %>
  <%= render_field_from_marc(exhibitions) %>
<% end %>

<% awards = get_data_with_label_from_marc(document.to_marc, "Awards", '586') %>
<% unless awards.nil? %>
  <%= render_field_from_marc(awards,:delimiter => "<br/>") %>
<% end %>

<% note_590 = get_data_with_label_from_marc(document.to_marc,"Note", '590') %>
<% unless note_590.nil? %>
  <%= render_field_from_marc(note_590) %>
<% end %>

<% note_592 = get_data_with_label_from_marc(document.to_marc,"Note", '592') %>
<% if note_592.present? && document.is_a_database? %>
  <%= render_field_from_marc(note_592) %>
<% end %>

<%- if document.to_marc['690'] and document.to_marc['690']['a'] and document.to_marc['690']['a'].downcase.include?("collection") -%>
  <%- local_subject_690 = link_to_data_with_label_from_marc(document.to_marc,"Local Subject", '690', {:action => 'index', :search_field => 'search'}) -%>
  <%- unless local_subject_690.nil? -%>
    <%= render_field_from_marc(local_subject_690) %>
  <%- end -%>
<%- end -%>

<%= link_to_related_works_from_marc(document.to_marc) %>

<%- new_related_work_740 = get_related_works_from_marc(document.to_marc, "Related Work", '740') -%>
<%- unless new_related_work_740.nil? -%>
  <%= render_field_from_marc(new_related_work_740) %>
<%- end -%>

<%- location = get_data_with_label_from_marc(document.to_marc, "Location", '752') -%>
<%- unless location.nil? -%>
  <%= render_field_from_marc(location) %>
<%- end -%>

<%- system_reqs = get_data_with_label_from_marc(document.to_marc, "System Reqs", '753') -%>
<%- unless system_reqs.nil? -%>
  <%= render_field_from_marc(system_reqs) %>
<%- end -%>

<%- taxonomy = get_data_with_label_from_marc(document.to_marc, "Taxonomy", '754') -%>
<%- unless taxonomy.nil? -%>
  <%= render_field_from_marc(taxonomy) %>
<%- end -%>

<%- series_array = ('a'..'z').to_a
    series_array << ('0'..'9').to_a - ['6','7','8']
-%>
<%- main_series = get_data_with_label_from_marc(document.to_marc, "Main Series", '760', {:sub_fields=>series_array.flatten}) %>
<%- unless main_series.nil? -%>
  <%= render_field_from_marc(main_series) %>
<%- end -%>

<%- subseries = get_data_with_label_from_marc(document.to_marc, "Subseries", '762', {:sub_fields=>series_array.flatten}) -%>
<%- unless subseries.nil? -%>
  <%= render_field_from_marc(subseries) %>
<%- end -%>

<%- translation = get_data_with_label_from_marc(document.to_marc, "Translation of", '765', {:sub_fields=>series_array.flatten}) -%>
<%- unless translation.nil? -%>
  <%= render_field_from_marc(translation) %>
<%- end -%>

<%- translated_as = get_data_with_label_from_marc(document.to_marc, "Translated as", '767', {:sub_fields=>series_array.flatten}) -%>
<%- unless translated_as.nil? -%>
  <%= render_field_from_marc(translated_as) %>
<%- end -%>

<%- has_supplement = get_data_with_label_from_marc(document.to_marc, "Has supplement", '770', {:sub_fields=>series_array.flatten}) -%>
<%- unless has_supplement.nil? -%>
  <%= render_field_from_marc(has_supplement, {:delimiter => "<br/>"}) %>
<%- end -%>

<%- supplement_to = get_data_with_label_from_marc(document.to_marc, "Supplement to", '772', {:sub_fields=>series_array.flatten}) -%>
<%- unless supplement_to.nil? -%>
  <%= render_field_from_marc(supplement_to, {:delimiter => "<br/>"}) %>
<%- end -%>

<%- in_note = get_data_with_label_from_marc(document.to_marc, "In", '773', {:sub_fields=>series_array.flatten}) -%>
<%- unless in_note.nil? -%>
  <%= render_field_from_marc(in_note, {:delimiter => "<br/>"}) %>
<%- end -%>

<%- constituent_unit = get_data_with_label_from_marc(document.to_marc, "Constituent unit", '774', {:sub_fields=>series_array.flatten}) -%>
<%- unless constituent_unit.nil? -%>
  <%= render_field_from_marc(constituent_unit, {:delimiter => "<br/>"}) %>
<%- end -%>

<%- other_edition = get_data_with_label_from_marc(document.to_marc, "Other edition", '775', {:sub_fields=>series_array.flatten}) -%>
<%- unless other_edition.nil? -%>
  <%= render_field_from_marc(other_edition, {:delimiter => "<br/>"}) %>
<%- end -%>

<%- other_form = get_data_with_label_from_marc(document.to_marc, "Available in another form", '776', {:sub_fields=>series_array.flatten}) -%>
<%- unless other_form.nil? -%>
  <%= render_field_from_marc(other_form, {:delimiter => "<br/>"}) %>
<%- end -%>

<%- issued_with = get_data_with_label_from_marc(document.to_marc, "Issued with", '777', {:sub_fields=>series_array.flatten}) -%>
<%- unless issued_with.nil? -%>
  <%= render_field_from_marc(issued_with, {:delimiter => "<br/>"}) %>
<%- end -%>

<%- data_source = get_data_with_label_from_marc(document.to_marc, "Data source", '786', {:sub_fields=>series_array.flatten}) -%>
<%- unless data_source.nil? -%>
  <%= render_field_from_marc(data_source, {:delimiter => "<br/>"}) %>
<%- end -%>

<%- related_item = get_data_with_label_from_marc(document.to_marc, "Related item", '787', {:sub_fields=>series_array.flatten}) -%>
<%- unless related_item.nil? -%>
  <%= render_field_from_marc(related_item, {:delimiter => "<br/>"}) %>
<%- end -%>

<%- title_change = title_change_data_from_marc(document.to_marc) -%>
<%- unless title_change.nil? -%>
  <%- title_change.each do |field| -%>
    <dt><%= field[:label] %></dt>
    <dd><%= field[:field].html_safe %></dd>
  <%- end -%>
<%- end -%>

<%- local_subject_790 = link_to_data_with_label_from_marc(document.to_marc,"Local Subject", '790', {:action => 'index', :search_field => 'search'}) -%>
<%- unless local_subject_790.nil? -%>
  <%= render_field_from_marc(local_subject_790) %>
<%- end -%>

<%- contributor_796 = get_data_with_label_from_marc(document.to_marc, "Contributor", '796') -%>
<%- unless contributor_796.nil? -%>
  <%= render_field_from_marc(contributor_796) %>
<%- end -%>

<%- contributor_797 = get_data_with_label_from_marc(document.to_marc, "Contributor", '797') -%>
<%- unless contributor_797.nil? -%>
  <%= render_field_from_marc(contributor_797) %>
<%- end -%>

<%- contributor_798 = get_data_with_label_from_marc(document.to_marc, "Contributor", '798') -%>
<%- unless contributor_798.nil? -%>
  <%= render_field_from_marc(contributor_798) %>
<%- end -%>

<%- related_work_799 = get_data_with_label_from_marc(document.to_marc, "Related Work", '799') -%>
<%- unless related_work_799.nil? -%>
  <%= render_field_from_marc(related_work_799) %>
<%- end -%>

<% if (isbn = get_data_with_label_from_marc(document.to_marc, 'ISBN', '020')).present? %>
  <%= render_field_from_marc(isbn) %>
<% end %>

<%- issn = get_data_with_label(document, "ISSN", 'issn_display') -%>
<%- unless issn.nil? -%>
  <%= render "catalog/field_from_index", :fields => issn %>
<%- end -%>

<%- pub_num = get_data_with_label_from_marc(document.to_marc, "Publisher Number", '028') -%>
<%- unless pub_num.nil? -%>
  <%= render_field_from_marc(pub_num) %>
<%- end -%>

<%- series_key = get_data_with_label_from_marc(document.to_marc, "Key Title", '222') -%>
<%- unless series_key.nil? -%>
  <%= render_field_from_marc(series_key) %>
<%- end -%>
