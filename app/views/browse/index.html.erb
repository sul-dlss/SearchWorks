<% @page_title = t 'blacklight.search.masthead_title', title: 'Browse related items', application_name: "#{I18n.t('blacklight.application_name')} catalog" %>

<% if params[:start].present? %>
  <div id="masthead-container">
    <div id="masthead" class="browse-masthead">
      <h1 class="my-3">Browse related items</h1>
      <p>Starting at call number:
        <% if params[:barcode] %>
          <%= @original_doc.holdings.find_by_barcode(params[:barcode])&.callnumber %>
        <% else %>
          <%= @original_doc.holdings.items.first.callnumber %>
        <% end %>
      </p>
      <p><%= link_to(document_presenter(@original_doc).heading, solr_document_path(@original_doc)) %></p>
    </div>
  </div>
<% end %>

<div id="content" class="callnumber-browse">
  <% if @items.present? %>
    <div class="browse-toolbar mb-3">
      <%= link_to(browse_index_path(browse_params.merge(before: @items.first.reverse_shelfkey, after: nil)), class: 'btn btn-secondary btn-sm') do %>
        <i class="fa fa-arrow-left" aria-hidden="true"></i><span class="sr-only">Previous</span>
      <% end %>
      <%= @items.first.callnumber %> - <%= @items.last.callnumber %>
      <%= link_to(browse_index_path(browse_params.merge(before: nil, after: @items.last.shelfkey)), class: 'btn btn-secondary btn-sm') do %>
        <i class="fa fa-arrow-right" aria-hidden="true"></i><span class="sr-only">Next</span>
      <% end %>
      <div class='pull-right'>
        <%= render 'catalog/view_type_group' %>
      </div>
    </div>
    <%= render_document_index(@items.map(&:document)) %>
  <% end %>
</div>
